<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>E-Mails</title>
  <link rel="stylesheet" href="../templates/css/style.css">
  <link rel="stylesheet" href="templates/css/style.css">
  <link rel="stylesheet" href="templates/css/responsivo.css">
</head>
<body>
  <div class="div-titulo">
    <h1>📧 Enviador de E-Mails</h1>
  </div>
  <main>
    <section class="main-content">
      <h2>Área de Envio</h2>
      <div class="form-send">
        <form action="index.php" method="post">
          <input type="hidden" name="acao" value="enviar-todos">

          <textarea name="mensagem" id="mensagem" cols="30" rows="10" placeholder="Mensagem para enviar..." minlength="3" spellcheck="true"></textarea>

          <div class="button-div">
            <input type="reset" value="❌" title="Limpar mensagem">
            <input type="submit" value="Enviar para todos">
          </div>

          {if (isset($mensagemEnviada) && strlen($mensagemEnviada) > 2)}
            <div class="mensagem-enviada"><strong>Mensagem enviada:</strong> <br>
              <span class="mensagem">{$mensagemEnviada}</span>
            </div>
          {/if}
        </form>
      </div>
      <hr>

      <h2>Adicionar Contato</h2>
      <form action="index.php" method="post" class="form-add">
        <input type="hidden" name="acao" value="add-contato">

        <input class="input-text" type="text" name="nome" id="nome" placeholder="Nome curto..." class="input-text" autocomplete="off" required>
        <input class="input-text" type="email" name="email" id="email" placeholder="email@exemplo.com" autocomplete="off" required>

        <div class="button-div">
          <input type="submit" value="Adicionar">
        </div>
      </form>
    </section>
    <section class="other-content">
      <h2>Lista de Contatos</h2>

      <form class="div-search" action="index.php" method="post">
        <input type="hidden" name="acao" value="pesquisar">
        <input class="search-bar" type="text" name="search" id="search" placeholder="Pesquisar nome ou e-mail..." autocomplete="off" value="{if (isset($mensagemPesquisa))}{$mensagemPesquisa}{/if}">
        
        <input class="search-button" type="submit" value="🔍">
      </form>

      <div class="user-list">
        {if (isset($mensagemPesquisa))}
          <div class="search-message">
            <small>Mostrando resultados para "{$mensagemPesquisa}" ({$results}):</small>
          </div>
        {/if}
        {foreach $listaUsers as $user}
        <div class="line">
          <span class="user-name" title="{$user.nome}">{$user.nome}</span> | 
          <span class="email" title="{$user.email}">{$user.email}</span> 
          <span class="actions">
            <svg class="edit" title="Editar contato" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule='evenodd' d='{$editIcon}' clip-rule='evenodd'/></svg>
            <svg class="delete" title="Deletar contato" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule='evenodd' d='{$deleteIcon}' clip-rule='evenodd'/></svg>
          </span>
        </div>
        {/foreach}
      </div>
      <div class="after-list">
        <p class="list-results-text"><small>{$results} resultado(s)</small></p>
        <form class="div-recarregar">
          <input class="reload-button" type="submit" value="🔄" title="Recarregar">
        </form>
      </div>
    </section>
  </main>

  <footer>
    <a href="https://github.com/ericravini" target="_blank">
      <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" viewBox="0 0 24 24">
        <path fill-rule="evenodd" d="M12.006 2a9.847 9.847 0 0 0-6.484 2.44 10.32 10.32 0 0 0-3.393 6.17 10.48 10.48 0 0 0 1.317 6.955 10.045 10.045 0 0 0 5.4 4.418c.504.095.683-.223.683-.494 0-.245-.01-1.052-.014-1.908-2.78.62-3.366-1.21-3.366-1.21a2.711 2.711 0 0 0-1.11-1.5c-.907-.637.07-.621.07-.621.317.044.62.163.885.346.266.183.487.426.647.71.135.253.318.476.538.655a2.079 2.079 0 0 0 2.37.196c.045-.52.27-1.006.635-1.37-2.219-.259-4.554-1.138-4.554-5.07a4.022 4.022 0 0 1 1.031-2.75 3.77 3.77 0 0 1 .096-2.713s.839-.275 2.749 1.05a9.26 9.26 0 0 1 5.004 0c1.906-1.325 2.74-1.05 2.74-1.05.37.858.406 1.828.101 2.713a4.017 4.017 0 0 1 1.029 2.75c0 3.939-2.339 4.805-4.564 5.058a2.471 2.471 0 0 1 .679 1.897c0 1.372-.012 2.477-.012 2.814 0 .272.18.592.687.492a10.05 10.05 0 0 0 5.388-4.421 10.473 10.473 0 0 0 1.313-6.948 10.32 10.32 0 0 0-3.39-6.165A9.847 9.847 0 0 0 12.007 2Z" clip-rule="evenodd"/>
      </svg>
      <span>@ericravini</span>
    </a>
  </footer>
</body>
</html>